import { useState } from 'react';
console.log("Arquivo App.jsx carregado da pasta correta!");

/* Campo de senha com “mostrar/ocultar” e aviso de Caps Lock */
function PasswordField() {
  const [show, setShow] = useState(false);
  const [capsOn, setCapsOn] = useState(false);

  const handleKeyState = (e) => {
    const caps = e.getModifierState && e.getModifierState('CapsLock');
    setCapsOn(Boolean(caps));
  };

  return (
    <>
      <label className="pill-input with-reveal">
        <span className="icon">
          <img src="/images/IconeCadeado.png" alt="" />
        </span>

        <input
          type={show ? 'text' : 'password'}
          placeholder="Senha"
          autoComplete="current-password"
          required
          onKeyDown={handleKeyState}
          onKeyUp={handleKeyState}
          onFocus={handleKeyState}
          onBlur={() => setCapsOn(false)}
        />

        {/* Botão para revelar/ocultar senha */}
        <button
          type="button"
          className="reveal"
          aria-label={show ? 'Ocultar senha' : 'Mostrar senha'}
          onClick={() => setShow((v) => !v)}
        >
          {show ? (
            // olho cortado
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path d="M3 3l18 18" stroke="currentColor" strokeWidth="2" />
              <path d="M10.58 10.58A3 3 0 0012 15a3 3 0 002.42-4.42M9.88 5.1A10.94 10.94 0 0112 5c5 0 9 4 10 7-.29.81-.78 1.76-1.49 2.66m-3.02 2.49A10.94 10.94 0 0112 19c-5 0-9-4-10-7 .53-1.48 1.57-3.02 3.17-4.42" stroke="currentColor" strokeWidth="2" />
            </svg>
          ) : (
            // olho normal
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z" stroke="currentColor" strokeWidth="2" />
              <circle cx="12" cy="12" r="3" stroke="currentColor" strokeWidth="2" />
            </svg>
          )}
        </button>
      </label>

      {/* Aviso Caps Lock */}
      <div className={`caps-hint ${capsOn ? 'on' : ''}`}>Caps Lock ativado</div>
    </>
  );
}

export default function App() {
  return (
    <div className="login-bg">
      {/* Top bar */}
      <div className="topbar">
        {/* Novo bloco Fatec estilizado */}
        <div className="logo-fatec-wrap">
          <img src="/images/LogoFatecZonaLeste.png" alt="Fatec Zona Leste" />
        </div>

        <div className="topbar-title">SISTEMA GERENCIADOR DE P.I</div>

        <img className="logo-top-right" src="/images/LogoSGPI.png" alt="SGPI" />
      </div>

      {/* Card principal dividido em 2 colunas */}
      <main className="login-shell">
        {/* Lado esquerdo (vermelho) — versão livre */}
        <section className="left-pane left-free">
          {/* LOGO independente */}
          <img className="left-logo" src="/images/LogoSGPI.png" alt="SGPI" />

          {/* CARD de texto independente */}
          <div className="left-card">
            <p>
              <strong>Bem vindo ao SGPI</strong>, um sistema centralizado
              para gerenciar os projetos integradores dos alunos de DSM
              da FATEC Zona Leste
            </p>
          </div>

          {/* BOTÃO independente */}
          <button className="left-cta">CADASTRAR</button>
        </section>

        {/* Lado direito (cinza azulado) */}
        <section className="right-pane">
          <form className="form" onSubmit={(e)=>e.preventDefault()}>
            <label className="pill-input">
              <span className="icon">
                <img src="/images/IconeUsuario.png" alt="" />
              </span>
              <input
                type="email"
                placeholder="Email institucional"
                autoComplete="username"
                required
              />
            </label>

            {/* Campo de senha com mostrar/ocultar + Caps Lock */}
            <PasswordField />

            <div className="actions">
              <a href="#" className="forgot">Esqueci a Senha</a>
              <button type="submit" className="btn-solid">Login</button>
            </div>
          </form>
        </section>
      </main>

      {/* Rodapé */}
      <footer className="bottombar">
        <div className="copy">© Copyright: Fatec-ZonaLeste</div>
        <img className="logo-cps" src="/images/LogoCPS.png" alt="CPS" />
      </footer>
    </div>
  );
}
